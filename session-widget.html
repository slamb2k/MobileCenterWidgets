<!DOCTYPE html>
<html>
<head>
    <link rel="stylesheet" type="text/css" href="css/vss/sdk-widgets.css" />
    <link rel="stylesheet" type="text/css" href="css/vss/sdk-widgets-core.css" />
    <link rel="stylesheet" type="text/css" href="css/vss/sdk-widgets-3rd-party-only.css" />
    <link rel="stylesheet" type="text/css" href="css/vss/sdk-widget-configuration.css" />
    
    <link rel="stylesheet" type="text/css" href="css/widget.css" />
    <link rel="stylesheet" type="text/css" href="css/config.css" />

    <script>
        function GetData() {
            var xhttp = new XMLHttpRequest();
            xhttp.open("GET", "https://api.mobile.azure.com/v0.1/apps/silamb/XamarinDevDays/analytics/session_counts?start=2017-07-24&interval=P30D", false);
            xhttp.setRequestHeader("Content-type", "application/json");
            xhttp.setRequestHeader("X-API-Token", "a0a1a9dd0747e90d365a925ea3de9523d2beaf01");
            xhttp.send();

            var response = JSON.parse(xhttp.responseText);
            total = 0;

            for (i = 0; i < response.length; i++) {  //loop through the array
                total += response[i].count;  //Do the math!
            }

            document.getElementById('tileValue').innerHTML = total;
        }
    </script>
</head>
<body onload="GetData()">
    <div class="widget" style="background-color: orange;">
        <h2 class="title">Sessions</h2>
        <div id="tileValue" class="big-count">0</div>
        <div class="footer">Count</div>
    </div>
</body>
</html>